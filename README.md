# Телеграм-бот для блога, посвящённому астрономии
Данный проект включает в себя
 - Набор утилит для удобного скачивания фотографий SpaceX, NASA APOD и NASA EPIC
 - Телеграм-бот для автоматической выгрузки фотографий в телеграм-канал

# Подготовка к использованию
## Утилиты
Чтобы использовать утилиты для скачивания NASA APOD и NASA EPIC необходимо [получить API-ключ NASA](https://api.nasa.gov/)
)
Ключ необходимо либо добавить в переменную среды `DVMN_NASA_API_KEY`, либо создать файл `.env` (если его ещё нет) в корне проекта, и вписать его туда в формате
```
DVMN_NASA_API_KEY=<значение_ключа_без_скобок>
```

## Telegram-бот
Чтобы использовать Telegram-бот, необходимо [создать](https://way23.ru/%D1%80%D0%B5%D0%B3%D0%B8%D1%81%D1%82%D1%80%D0%B0%D1%86%D0%B8%D1%8F-%D0%B1%D0%BE%D1%82%D0%B0-%D0%B2-telegram.html) его и [сделать администратором канала](https://smmplanner.com/blog/otlozhennyj-posting-v-telegram/)

Ключ необходимо либо добавить в переменную среды `DVMN_TG_BOT_API_KEY`, либо создать файл `.env` (если его ещё нет) в корне проекта, и вписать его туда в формате
```
DVMN_TG_BOT_API_KEY=<значение_ключа_без_скобок>
```

Аналогично, либо в качестве переменной среды, либо в качестве строчки в файле `.env` необходимо написать id канала (его название через @)
```
DVMN_TG_BOT_CHAT_ID=@<название_канала_без_скобок>
```

# Установка
Требуется установленный `Python 3.7` или новее. Скачать его можно [здесь](https://www.python.org/), или же в соответствующем репозитории для вашей ОС.
Для установки зависимостей используйте `pip` (или `pip3`, есть конфликт с `Python2`)
```
pip install -r requirements.txt
```

# Запуск
## Фотографии SpaceX
Для скачивания введите в папке с проектом
```
python fetch_spacex_images.py
```
Также можно использовать следующие ключи:
 - `-l <id>`, `--launch_id <id>` - Идентификатор конкретного запуска. Если ключ не указан, то утилита по умолчанию скачивает фотографии для последнего доступного запуска
 - `-d <dir>`, `--directory <dir>` - Папка, в которую будут скачиваться фотографии. Если папки нет - она будет создана. Если ключ не указан, то по умолчанию все фотографии скачиваются в папку `images`
 - `-h`, `--help` - Помощь по утилите

## Фотографии NASA APOD
Для скачивания введите в папке с проектом
```
python fetch_nasa_apod_images.py
```
Также можно использовать следующие ключи:
 - `-t <date>`, `--date <date>` - Фотография конкретного дня. Дату необходимо вводить в ISO-формате `ГГГГ-ММ-ДД`. Если ключ не указан, то по умолчанию скачивается фотография, полученная сегодня
 - `-s <date>`, `--start-date <date>` - Если требуется скачать фотографии за какой-либо промежуток дат, то в данном ключе необходимо указать начальную дату в ISO-формате `ГГГГ-ММ-ДД`. Данный ключ игнорируется, есть указан ключ `-t` или `--date`
 - `-e <date>`, `--end-date <date>` - Если требуется скачать фотографии за какой-либо промежуток дат, то в данном ключе необходимо указать конечную дату в ISO-формате `ГГГГ-ММ-ДД`. Если ключ не указан, то по умолчанию устанавливается конечная дата как "сегодня". Данный ключ игнорируется, есть указан ключ `-t` или `--date`
 - `-d <dir>`, `--directory <dir>` - Папка, в которую будут скачиваться фотографии. Если папки нет - она будет создана. Если ключ не указан, то по умолчанию все фотографии скачиваются в папку `images`
 - `-h`, `--help` - Помощь по утилите

## Фотографии NASA EPIC
Для скачивания введите в папке с проектом
```
python fetch_nasa_epic_images.py
```
Также можно использовать следующие ключи:
 - `-a`, `--all` - Скачивание всех доступных на сегодняшний день фотографий. Если ключ не указан, то утилита по умолчанию скачивает последнюю доступную фотографию.
 - `-d <dir>`, `--directory <dir>` - Папка, в которую будут скачиваться фотографии. Если папки нет - она будет создана. Если ключ не указан, то по умолчанию все фотографии скачиваются в папку `images`
 - `-h`, `--help` - Помощь по утилите

## Telegram-бот
Для запуска Telegram-бота введите
```
python tg_bot.py
```
Также можно использовать следующие ключи:
 - `-p`, `--period` - Период выкладывания фотографий в канал (в часах). Поддерживаются дробные значения. Если ключ не указан, то по умолчанию устанавливается значение в 4 часа.
 - `-d <dir>`, `--directory <dir>` - Папка, из которой будут загружаться фотографии. Если ключ не указан, то по умолчанию все фотографии загружаются из папки `images`
 - `-h`, `--help` - Помощь по утилите

# Цель проекта
Код написан в образовательных целях на онлайн-курсе для веб-разработчиков [dvmn.org](https://dvmn.org/).